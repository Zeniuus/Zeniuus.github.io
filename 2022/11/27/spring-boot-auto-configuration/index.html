<!DOCTYPE html>
<html>
  <head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-137809918-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-137809918-1');
  </script>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="Suhwan Jee&#39;s blog">
  <meta name="keyword" content="Develop, Backend, Server, Spring">
  
    <link rel="shortcut icon" type="image/ico" href="/images/favicon.png"/> 
  
  <title>
    
      Spring Boot Auto-Configuration
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">

  <script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
<script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>

  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js"></script>
    <!-- MathJax support END -->
  


<meta name="generator" content="Hexo 7.3.0"></head>
<div class="wechat-share">
  <img src="/images/favicon.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <span>Home</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/develop/" class="item-link">Develop</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/diary/" class="item-link">Diary</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archive/" class="item-link">Archive</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/develop/" class="menu-link">Develop</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/diary/" class="menu-link">Diary</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archive/" class="menu-link">Archive</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>Spring Boot Auto-Configuration</h2>
  <p class="post-date">2022-11-27</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><h2 id="Auto-configurationì´ë€"><a href="#Auto-configurationì´ë€" class="headerlink" title="Auto-configurationì´ë€?"></a>Auto-configurationì´ë€?</h2><h3 id="ì •ì˜"><a href="#ì •ì˜" class="headerlink" title="ì •ì˜"></a>ì •ì˜</h3><p>ìš°ì„  auto-configurationì˜ ì •ì˜ë¶€í„° ì‚´í´ë³´ì. <a href="https://docs.spring.io/spring-boot/docs/3.0.0/reference/htmlsingle/#using.auto-configuration">Spring Boot Referenceì˜ Auto-configuration ì„¹ì…˜</a>ì—ì„œëŠ” auto-configurationì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•œë‹¤.</p>
<blockquote>
<p>Spring Boot auto-configuration attempts to automatically configure your Spring application based on the jar dependencies that you have added. For example, if <code>HSQLDB</code> is on your classpath, and you have not manually configured any database connection beans, then Spring Boot auto-configures an in-memory database.</p>
</blockquote>
<p>ê·¸ë¦¬ê³ , Spring Boot 3.0.0ë¶€í„° ì¶”ê°€ëœ <code>@AutoConfiguration</code>ì˜ javadocì—ëŠ” ì•„ë˜ì™€ ê°™ì´ ì í˜€ ìˆë‹¤.</p>
<blockquote>
<p>Indicates that a class provides configuration that can be automatically applied by Spring Boot. Auto-configuration classes are regular @Configuration with the exception that Configuration#proxyBeanMethods() proxyBeanMethods is always false.</p>
</blockquote>
<p>ëŒ€ì¶© <code>Spring Bootê°€ ìë™(auto)ìœ¼ë¡œ ì ìš©í•´ì£¼ëŠ” configuration</code> ì •ë„ë¡œ ìš”ì•½í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤. ì¢€ ë” ëª…í™•í•œ ì •ì˜ê°€ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ì–´ì„œ ì¡°ê¸ˆ ì°¾ì•„ ë³´ì•˜ì§€ë§Œ, ì´ê²ƒ ì´ìƒìœ¼ë¡œ ì •í™•í•œ ì •ì˜ëŠ” ì°¾ì§€ ëª»í–ˆë‹¤.<br><br /></p>
<h3 id="Configuration-vs-Auto-configuration"><a href="#Configuration-vs-Auto-configuration" class="headerlink" title="Configuration vs. Auto-configuration"></a>Configuration vs. Auto-configuration</h3><p><code>@Configuration</code>ì´ ì´ë¯¸ ì¡´ì¬í•¨ì—ë„ ë¶ˆêµ¬í•˜ê³  auto-configurationì´ë¼ëŠ” ê°œë…ì„ ë§Œë“¤ì–´ì•¼ í–ˆë˜ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ? ì´ëŠ” Spring Bootê°€ ìµœëŒ€í•œì˜ ê¸°ëŠ¥ ì§€ì›ì„ ìë™ìœ¼ë¡œ, ìŠ¤ë§ˆíŠ¸í•˜ê²Œ í•´ì£¼ê¸° ìœ„í•¨ìœ¼ë¡œ ë³´ì¸ë‹¤. ì¼ë°˜ì ì¸ configurationì˜ ê²½ìš°, <code>@ComponentScan</code>ì— ê±¸ë¦¬ë©´ ë¬´ì¡°ê±´ ì ìš©ë˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ Spring Bootê°€ í•„ìš”ë¡œ í–ˆë˜ ê¸°ëŠ¥ì€ ì•„ë˜ì™€ ê°™ì€ ê²ƒë“¤ì´ì—ˆë‹¤.</p>
<ul>
<li>ì‚¬ìš©ìê°€ RDBë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, DataSource íƒ€ì…ì˜ beanì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ìë™ìœ¼ë¡œ í•˜ë‚˜ ë§Œë“¤ì–´ ì£¼ê³  ì‹¶ë‹¤.</li>
<li>ì‚¬ìš©ìê°€ Redisë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ë§Œ Redis ê´€ë ¨ beanì„ application contextì— ë“±ë¡í•˜ê³  ì‹¶ë‹¤.</li>
</ul>
<p>ì¦‰, <strong>Spring BootëŠ” ì¡°ê±´ë¶€ë¡œ ì ìš©ë˜ëŠ” configurationì„ ì›í–ˆë˜ ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  auto-configurationì€ ì •í™•íˆ ì´ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.</strong></p>
<p>ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” auto-configurationì´ ì¡°ê±´ë¶€ë¡œ ì ìš©ë˜ëŠ” ì›ë¦¬ì— ëŒ€í•´ ìì„¸í•˜ê²Œ íŒŒí—¤ì³ ë³´ê² ë‹¤.<br><br /></p>
<h2 id="Auto-configurationì´-ì ìš©ë˜ëŠ”-ì›ë¦¬"><a href="#Auto-configurationì´-ì ìš©ë˜ëŠ”-ì›ë¦¬" class="headerlink" title="Auto-configurationì´ ì ìš©ë˜ëŠ” ì›ë¦¬"></a>Auto-configurationì´ ì ìš©ë˜ëŠ” ì›ë¦¬</h2><h3 id="ì‚¬ìš©ë²•"><a href="#ì‚¬ìš©ë²•" class="headerlink" title="ì‚¬ìš©ë²•"></a>ì‚¬ìš©ë²•</h3><p>ìœ„ì—ì„œ ì–¸ê¸‰í•œ ëŒ€ë¡œ, Spring Bootë¥¼ ì‚¬ìš©í•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¼ë°˜ì ì¸ configurationì€ <code>@ComponentScan</code>ì— ê±¸ë¦¬ê²Œ ì„¤ì •í•´ì•¼ ì ìš©ëœë‹¤. <code>@ComponentScan</code>ì— ê±¸ë¦¬ì§€ ì•ŠëŠ” íŒ¨í‚¤ì§€ ê²½ë¡œì— ìœ„ì¹˜í•œë‹¤ë©´ configurationì—ì„œ ì •ì˜í•œ beanì€ application contextì— ë“±ë¡ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>
<p>í•œí¸, auto-configurationì€ <code>@ComponentScan</code>ê³¼ëŠ” ë³„ë„ì˜ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ì ìš©ëœë‹¤. auto-configurationì€ ì•„ë˜ 4ê°œì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ì ìš©ëœë‹¤.</p>
<ol>
<li>ì•„ë¬´ configuration í´ë˜ìŠ¤ì— <code>@EnableAutoConfiguration</code>ì´ ì ìš©ë˜ì–´ ìˆë‹¤.</li>
<li><code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>(Spring Boot 2.6 ì´í•˜ëŠ” <code>META-INF/spring.factories</code>) íŒŒì¼ì— ëŒ€ìƒ auto-configurationì´ ì í˜€ ìˆë‹¤.</li>
<li>ëŒ€ìƒ auto-configurationì´ ëª…ì‹œì ìœ¼ë¡œ exclude ë˜ì–´ ìˆì§€ ì•Šë‹¤.</li>
<li>ëŒ€ìƒ auto-configurationì˜ class-level <code>@Conditional</code> ì¡°ê±´ë“¤ì´ ë§Œì¡±ëœë‹¤.</li>
</ol>
<p>ì´ë ‡ê²Œ ì ìš© ëŒ€ìƒì´ ëœ auto-configurationì˜ bean method ì¤‘ method-level <code>@Conditional</code>ì´ ë§Œì¡±ë˜ëŠ” ê²ƒë“¤ë§Œ application contextì— ì ìš©ëœë‹¤.<br><br /></p>
<h3 id="ì›ë¦¬"><a href="#ì›ë¦¬" class="headerlink" title="ì›ë¦¬"></a>ì›ë¦¬</h3><p>Auto-configurationì´ ì ìš©ë˜ëŠ” ê³¼ì •ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>
<ol>
<li><p><code>@EnableAutoConfiguration</code>ì´ ì ìš©ë˜ì–´ ìˆë‹¤ë©´, application context êµ¬ì„± ë‹¨ê³„ì—ì„œ í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì— ë¶™ì–´ ìˆëŠ” <code>@Import(AutoConfigurationImportSelector.class)</code> ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ì— ì˜í•´ <code>AutoConfigurationImportSelector</code>ê°€ ì‹¤í–‰ëœë‹¤.</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ConfigurationClassParser.doProcessConfigurationClass() */</span></span><br><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> SourceClass <span class="title function_">doProcessConfigurationClass</span><span class="params">(</span></span><br><span class="line"><span class="params">    ConfigurationClass configClass, SourceClass sourceClass, Predicate&lt;String&gt; filter)</span></span><br><span class="line">    <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">/* Recursively process any member (nested) classes first */</span></span><br><span class="line">    <span class="comment">/* ì½”ë“œ ìƒëµ */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Process any @PropertySource annotations */</span></span><br><span class="line">    <span class="comment">/* ì½”ë“œ ìƒëµ */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Process any @ComponentScan annotations */</span></span><br><span class="line">    <span class="comment">/* ì½”ë“œ ìƒëµ */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Process any @Import annotations */</span></span><br><span class="line">    processImports(configClass, sourceClass, getImports(sourceClass), filter, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* í›„ëµ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> <code>sourceClass</code>ì— <code>@EnableAutoConfiguration</code>ì´ ë‹¬ë¦° configuration(ë³´í†µ <code>@SpringBootApplication</code>)ì´ ë“¤ì–´ì˜¤ë©´, <code>getImports(sourceClass)</code>ì—ì„œ <code>AutoConfigurationImportSelector</code>ê°€ ê°€ì ¸ì™€ì ¸ì„œ ì ìš©ëœë‹¤.</p>
</li>
<li><p><code>AutoConfigurationImportSelector</code>ëŠ” ì ìš©í•  auto-configuration ëª©ë¡ì„ <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> íŒŒì¼ì—ì„œ ì½ì–´ ë“¤ì¸ë‹¤.</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* AutoConfigurationImportSelector.getCandidateConfigurations() */</span></span><br><span class="line"><span class="keyword">protected</span> List&lt;String&gt; <span class="title function_">getCandidateConfigurations</span><span class="params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> &#123;</span><br><span class="line">    List&lt;String&gt; configurations = ImportCandidates.load(AutoConfiguration.class, getBeanClassLoader())</span><br><span class="line">        .getCandidates();</span><br><span class="line">    Assert.notEmpty(configurations,</span><br><span class="line">        <span class="string">&quot;No auto configuration classes found in &quot;</span></span><br><span class="line">            + <span class="string">&quot;META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports. If you &quot;</span></span><br><span class="line">            + <span class="string">&quot;are using a custom packaging, make sure that file is correct.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> configurations;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ImportCandidates.load() */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ImportCandidates <span class="title function_">load</span><span class="params">(Class&lt;?&gt; annotation, ClassLoader classLoader)</span> &#123;</span><br><span class="line">    Assert.notNull(annotation, <span class="string">&quot;&#x27;annotation&#x27; must not be null&quot;</span>);</span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoaderToUse</span> <span class="operator">=</span> decideClassloader(classLoader);</span><br><span class="line">    <span class="type">String</span> <span class="variable">location</span> <span class="operator">=</span> String.format(LOCATION, annotation.getName()); <span class="comment">/* LOCATION == &quot;META-INF/spring/%s.imports&quot; */</span></span><br><span class="line">    Enumeration&lt;URL&gt; urls = findUrlsInClasspath(classLoaderToUse, location);</span><br><span class="line">    List&lt;String&gt; autoConfigurations = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (urls.hasMoreElements()) &#123;</span><br><span class="line">      <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> urls.nextElement();</span><br><span class="line">      autoConfigurations.addAll(readAutoConfigurations(url));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ImportCandidates</span>(autoConfigurations);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ëª…ì‹œì ìœ¼ë¡œ exclude ëœ auto-configurationì„ ì œì™¸ì‹œí‚¨ë‹¤.</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* AutoConfigurationImportSelector.getAutoConfigurationEntry() */</span></span><br><span class="line"><span class="keyword">protected</span> AutoConfigurationEntry <span class="title function_">getAutoConfigurationEntry</span><span class="params">(AnnotationMetadata annotationMetadata)</span> &#123;</span><br><span class="line">    <span class="comment">/* ì „ëµ */</span></span><br><span class="line">    List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes); <span class="comment">/* 2ë²ˆì—ì„œ ê°€ì ¸ì˜¨ auto-configuration ëª©ë¡ */</span></span><br><span class="line">    configurations = removeDuplicates(configurations);</span><br><span class="line">    Set&lt;String&gt; exclusions = getExclusions(annotationMetadata, attributes);</span><br><span class="line">    checkExcludedClasses(configurations, exclusions);</span><br><span class="line">    configurations.removeAll(exclusions);</span><br><span class="line">    <span class="comment">/* í›„ëµ */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* AutoConfigurationImportSelector.getExclusions() */</span></span><br><span class="line"><span class="keyword">protected</span> Set&lt;String&gt; <span class="title function_">getExclusions</span><span class="params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> &#123;</span><br><span class="line">    Set&lt;String&gt; excluded = <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>&lt;&gt;();</span><br><span class="line">    excluded.addAll(asList(attributes, <span class="string">&quot;exclude&quot;</span>));</span><br><span class="line">    excluded.addAll(asList(attributes, <span class="string">&quot;excludeName&quot;</span>));</span><br><span class="line">    excluded.addAll(getExcludeAutoConfigurationsProperty());</span><br><span class="line">    <span class="keyword">return</span> excluded;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>class-level <code>@Conditional</code> ì–´ë…¸í…Œì´ì…˜ì„ í™•ì¸í•˜ì—¬ ì¡°ê±´ì´ ë§Œì¡±ë˜ì§€ ì•Šì€ auto-configurationì„ ì œì™¸ì‹œí‚¨ë‹¤.</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ConfigurationClassParser.processConfigurationClass() */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">processConfigurationClass</span><span class="params">(ConfigurationClass configClass, Predicate&lt;String&gt; filter)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.conditionEvaluator.shouldSkip(configClass.getMetadata(), ConfigurationPhase.PARSE_CONFIGURATION)) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* í›„ëµ */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ConditionEvaluator.shouldSkip() */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">shouldSkip</span><span class="params">(<span class="meta">@Nullable</span> AnnotatedTypeMetadata metadata, <span class="meta">@Nullable</span> ConfigurationPhase phase)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (metadata == <span class="literal">null</span> || !metadata.isAnnotated(Conditional.class.getName())) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* ì¤‘ëµ */</span></span><br><span class="line"></span><br><span class="line">    List&lt;Condition&gt; conditions = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* ì¤‘ëµ */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (Condition condition : conditions) &#123;</span><br><span class="line">      <span class="type">ConfigurationPhase</span> <span class="variable">requiredPhase</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">      <span class="keyword">if</span> (condition <span class="keyword">instanceof</span> ConfigurationCondition) &#123;</span><br><span class="line">        requiredPhase = ((ConfigurationCondition) condition).getConfigurationPhase();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> ((requiredPhase == <span class="literal">null</span> || requiredPhase == phase) &amp;&amp; !condition.matches(<span class="built_in">this</span>.context, metadata)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>auto-configurationì—ì„œ ì •ì˜í•œ ê° beanì„ application contextì— ë“±ë¡í•œë‹¤. ì´ ë•Œ method-level <code>@Conditional</code>ì´ ë§Œì¡±ë˜ì§€ ì•Šì€ beanì€ ë“±ë¡ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>
</li>
</ol>
<blockquote>
<p>ğŸ’¡ configurationê³¼ auto-configurationì´ ì ìš©ë˜ëŠ” ì „ì²´ ê³¼ì •ì€ <code>ConfigurationClassPostProcessor.processConfigBeanDefinitions()</code> ì—ì„œ ë³´ë‹¤ ìƒì„¸í•˜ê²Œ ì‚´í´ë³¼ ìˆ˜ ìˆë‹¤.</p>
</blockquote>
<h3 id="ì˜ˆì‹œ-DataSourceAutoConfiguration"><a href="#ì˜ˆì‹œ-DataSourceAutoConfiguration" class="headerlink" title="ì˜ˆì‹œ - DataSourceAutoConfiguration"></a>ì˜ˆì‹œ - DataSourceAutoConfiguration</h3><p>Spring Boot Starterì— ì •ì˜ëœ auto-configuration ì¤‘ í•˜ë‚˜ì¸ <code>DataSourceAutoConfiguration</code>ë¥¼ ì˜ˆì‹œë¡œ ë“¤ì–´ ì‚´í´ë³´ì.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.springframework.boot.autoconfigure.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> EnableAutoConfiguration Auto-configuration&#125; for &#123;<span class="doctag">@link</span> DataSource&#125;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Dave Syer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Phillip Webb</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Stephane Nicoll</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Kazuki Shimizu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.0.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@AutoConfiguration(before = SqlInitializationAutoConfiguration.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; DataSource.class, EmbeddedDatabaseType.class &#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(type = &quot;io.r2dbc.spi.ConnectionFactory&quot;)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(DataSourceProperties.class)</span></span><br><span class="line"><span class="meta">@Import(DataSourcePoolMetadataProvidersConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSourceAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line">    <span class="meta">@Conditional(EmbeddedDatabaseCondition.class)</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(&#123; DataSource.class, XADataSource.class &#125;)</span></span><br><span class="line">    <span class="meta">@Import(EmbeddedDataSourceConfiguration.class)</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">EmbeddedDatabaseConfiguration</span> &#123;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/* í›„ëµ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Class-level ì–´ë…¸í…Œì´ì…˜ì„ ì‚´í´ë³´ë©´ ì•„ë˜ì˜ ì–´ë…¸í…Œì´ì…˜ì´ ë‹¬ë ¤ ìˆë‹¤.</p>
<ul>
<li><p><code>@AutoConfiguration(before = SqlInitializationAutoConfiguration.class)</code> - ì´ëŠ” auto-configurationì´ ì ìš©ë˜ëŠ” ìˆœì„œë¥¼ ì§€ì •í•œ ê²ƒì´ë‹¤. <code>@AutoConfigureBefore</code> ë° <code>@AutoConfigureAfter</code>ì™€ ë™ì¼í•œ íš¨ê³¼ë¥¼ ë‚¸ë‹¤.</p>
<p>  Auto-configurationì´ ì ìš©ë˜ëŠ” ìˆœì„œê°€ ì¤‘ìš”í•œ ì´ìœ ëŠ”, <code>@ConditionalOnMissingBean</code>ê³¼ ê°™ì´ íŠ¹ì • beanì´ application contextì— ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ auto-configurationì˜ ì‹¤í–‰ ì—¬ë¶€ê°€ íŒë‹¨ë  ë•Œê°€ ë§ê¸° ë•Œë¬¸ì´ë‹¤. ì´ëŠ” <a href="/2022/11/27/spring-boot-auto-configuration/#Auto-configurationì€-ì‹¤í–‰ë˜ëŠ”-ìˆœì„œê°€-ì¤‘ìš”í•˜ë‹¤">Auto-configurationì€ ì‹¤í–‰ë˜ëŠ” ìˆœì„œê°€ ì¤‘ìš”í•˜ë‹¤ ì„¹ì…˜</a>ì—ì„œ ì¡°ê¸ˆ ë” ê¹Šì´ ë‹¤ë£¬ë‹¤.</p>
</li>
<li><p><code>@ConditionalOnClass(&#123; DataSource.class, EmbeddedDatabaseType.class &#125;)</code> - ì´ëŠ” <code>DataSource</code>ì™€ <code>EmbeddedDatabaseType</code> í´ë˜ìŠ¤ê°€ classpathì— ì¡´ì¬í•˜ëŠ” ê²½ìš°ì—ë§Œ auto-configurationì„ ì ìš©í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ë‹¤. ì´ ì¡°ê±´ ë•ë¶„ì— JDBCë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ë§Œ ì´ auto-configurationì„ ì ìš©ì‹œí‚¬ ìˆ˜ ìˆë‹¤.</p>
</li>
<li><code>@ConditionalOnMissingBean(type = &quot;io.r2dbc.spi.ConnectionFactory&quot;)</code> - ì´ ì¡°ê±´ ë•ë¶„ì— r2dbcë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì´ auto-configurationì„ ì ìš©ì‹œí‚¤ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.</li>
<li><code>@EnableConfigurationProperties(DataSourceProperties.class)</code> - auto-configurationê³¼ëŠ” ê´€ê³„ ì—†ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë¯€ë¡œ ì„¤ëª…ì„ ìƒëµí•œë‹¤.</li>
<li><p><code>@Import(DataSourcePoolMetadataProvidersConfiguration.class)</code> - ì´ auto-configurationì´ ì ìš©ë  ìˆ˜ ìˆëŠ” ìƒí™©ì¸ ê²½ìš°, <code>DataSourcePoolMetadataProvidersConfiguration</code> ì—­ì‹œ ì ìš©í•œë‹¤.</p>
<p>  ì´ëŠ” ë™ì¼í•œ <code>@Conditional</code>ì„ ì—¬ëŸ¬ auto-configurationì— ë³µì‚¬í•´ì„œ ì ê±°ë‚˜ <a href="https://github.com/spring-projects/spring-boot/blob/v3.0.0/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports">META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</a> íŒŒì¼ì— í´ë˜ìŠ¤ë¥¼ ì ì–´ì•¼ í•˜ëŠ” ë“±ì˜ ë²ˆê±°ë¡œì›€ì„ ì¤„ì—¬ì¤€ë‹¤.</p>
</li>
</ul>
<p>ë˜í•œ, ìœ„ í´ë˜ìŠ¤ëŠ” spring-boot-autoconfigure ëª¨ë“ˆì˜ <a href="https://github.com/spring-projects/spring-boot/blob/v3.0.0/spring-boot-project/spring-boot-autoconfigure/src/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports">META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</a> íŒŒì¼ì— ëª…ì‹œë˜ì–´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br><br /></p>
<h3 id="ì¡ë‹´"><a href="#ì¡ë‹´" class="headerlink" title="ì¡ë‹´"></a>ì¡ë‹´</h3><p>Spring Boot 2.7.0ë¶€í„° <code>@AutoConfiguration</code> ì–´ë…¸í…Œì´ì…˜ì´ ë“±ì¥í–ˆìŒì—ë„ <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code> íŒŒì¼ì—ì„œ auto-configurationì„ ì½ì–´ì˜¤ëŠ” ê²Œ ì´ìƒí•˜ë‹¤ê³  ìƒê°í–ˆëŠ”ë°, ì‹¤í–‰ ì†ë„ë¥¼ ìœ„í•´ ì´ëŸ° êµ¬ì¡°ë¡œ ë§Œë“¤ì§€ ì•Šì•˜ì„ê¹Œ ì‹¶ë‹¤. <code>@ComponentScan</code>ì— ê±¸ë¦¬ì§€ ì•Šì•„ë„ ë™ì‘í•´ì•¼ í•˜ëŠ” auto-configuration íŠ¹ì„± ìƒ ì´ë¥¼ scanningìœ¼ë¡œ ì°¾ì•„ë‚´ë ¤ë©´ ëª¨ë“  classpathì˜ í´ë˜ìŠ¤ë¥¼ ì „ë¶€ scaní•´ì•¼ í•˜ëŠ”ë°, ì´ëŠ” ë„ˆë¬´ ë¹„íš¨ìœ¨ì ì´ë‹¤. ê·¸ë˜ì„œ ì ìš©í•  auto-configuration ëª©ë¡ì„ ëª…ì‹œì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë°©ë²•ì„ íƒí•œ ë“¯ í•˜ë‹¤.<br><br /></p>
<h2 id="Auto-configuration-ì‚¬ìš©-ì‹œ-ì£¼ì˜ì‚¬í•­"><a href="#Auto-configuration-ì‚¬ìš©-ì‹œ-ì£¼ì˜ì‚¬í•­" class="headerlink" title="Auto-configuration ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­"></a>Auto-configuration ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­</h2><p>ë‹¤ìŒì€ auto-configuration ì‚¬ìš© ì‹œ ì¼ë°˜ì ìœ¼ë¡œ ì£¼ì˜í•´ì•¼ í•˜ëŠ” ì‚¬í•­ê³¼, í•„ìê°€ auto-configurationì„ ì‚¬ìš©í•˜ë©´ì„œ ê²ªì€ trouble shootingì„ ê¸°ë¡í•œ ê²ƒì´ë‹¤.</p>
<h3 id="Auto-configurationì€-ì‹¤í–‰ë˜ëŠ”-ìˆœì„œê°€-ì¤‘ìš”í•˜ë‹¤"><a href="#Auto-configurationì€-ì‹¤í–‰ë˜ëŠ”-ìˆœì„œê°€-ì¤‘ìš”í•˜ë‹¤" class="headerlink" title="Auto-configurationì€ ì‹¤í–‰ë˜ëŠ” ìˆœì„œê°€ ì¤‘ìš”í•˜ë‹¤"></a>Auto-configurationì€ ì‹¤í–‰ë˜ëŠ” ìˆœì„œê°€ ì¤‘ìš”í•˜ë‹¤</h3><p><code>@ConditionalOnBean</code>ì˜ javadocì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ë‚´ìš©ì´ ëª…ì‹œë˜ì–´ ìˆë‹¤.</p>
<blockquote>
<p>The condition can only match the bean definitions that have been processed by the application context so far and, as such, it is strongly recommended to use this condition on auto-configuration classes only.</p>
</blockquote>
<p>ì´ ì¤‘ ì§€ê¸ˆ ì§‘ì¤‘í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì€ <code>The condition can only match the bean definitions that have been processed by the application context so far</code>ì´ë‹¤. ì´ ë‚´ìš©ì— ë”°ë¥´ë©´, <code>@ConditionalOnBean</code>ê³¼ <code>@ConditionalOnMissingBean</code>ì˜ evalutation ê²°ê³¼ëŠ” auto-configurationê°€ ì–´ë–¤ ìˆœì„œë¡œ ì²˜ë¦¬ë˜ëŠëƒì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤. ì¦‰, <strong>ë™ì¼í•œ ëª©ë¡ì˜ auto-configurationì„ ì²˜ë¦¬í•˜ë”ë¼ë„ ì²˜ë¦¬ ìˆœì„œì— ë”°ë¼ application contextì— ë“±ë¡ë˜ëŠ” bean ëª©ë¡ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ</strong>ì´ë‹¤.</p>
<p>ë”°ë¼ì„œ, íŠ¹íˆë‚˜ custom auto-configurationì„ ì œì‘í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, auto-configurationì˜ ì²˜ë¦¬ ìˆœì„œë¥¼ ì‹ ì¤‘í•˜ê²Œ ì œì–´í•´ì•¼ í•œë‹¤. ì•„ë˜ì˜ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ auto-configurationì˜ ì²˜ë¦¬ ìˆœì„œë¥¼ ì œì–´í•  ìˆ˜ ìˆë‹¤.</p>
<ul>
<li><code>@AutoConfiguration</code>, <code>@AutoConfigureBefore</code>, <code>@AutoConfigureAfter</code></li>
<li><code>@AutoConfigureOrder</code><br><br /></li>
</ul>
<h3 id="Auto-configurationì€-ComponentScanì—-ê±¸ë¦¬ë©´-ì•ˆ-ëœë‹¤"><a href="#Auto-configurationì€-ComponentScanì—-ê±¸ë¦¬ë©´-ì•ˆ-ëœë‹¤" class="headerlink" title="Auto-configurationì€ @ComponentScanì— ê±¸ë¦¬ë©´ ì•ˆ ëœë‹¤"></a>Auto-configurationì€ @ComponentScanì— ê±¸ë¦¬ë©´ ì•ˆ ëœë‹¤</h3><p><code>Auto-configurationì€ ì‹¤í–‰ë˜ëŠ” ìˆœì„œê°€ ì¤‘ìš”í•˜ë‹¤</code>ì™€ ì´ì–´ì§€ëŠ” ë‚´ìš©ì´ë‹¤. auto-configurationì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìê°€ êµ¬ì„±í•œ application contextì˜ í˜•íƒœì— ë”°ë¼ ì¡°ê±´ë¶€ë¡œ ì ìš©ë˜ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. ë”°ë¼ì„œ, <strong>auto-configurationì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìê°€ ì •ì˜í•œ beanì´ ëª¨ë‘ application contextì— ë“±ë¡ëœ ì´í›„ì— ì²˜ë¦¬ë˜ì–´ì•¼ë§Œ í•œë‹¤.</strong> ìœ„ì—ì„œ ì‚´í´ ë³¸ <code>ConfigurationClassParser.doProcessConfigurationClass()</code>ì˜ pseudo codeë¥¼ ë‹¤ì‹œ ì‚´í´ ë³´ì.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ConfigurationClassParser.doProcessConfigurationClass() */</span></span><br><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> SourceClass <span class="title function_">doProcessConfigurationClass</span><span class="params">(</span></span><br><span class="line"><span class="params">    ConfigurationClass configClass, SourceClass sourceClass, Predicate&lt;String&gt; filter)</span></span><br><span class="line">    <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">/* Recursively process any member (nested) classes first */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Process any @PropertySource annotations */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Process any @ComponentScan annotations */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Process any @Import annotations */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Process any @ImportResource annotations */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* Process individual @Bean methods */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Process default methods on interfaces */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* í›„ëµ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ì´ ì½”ë“œì— ë”°ë¥´ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìê°€ ì •ì˜í•œ <code>@Component</code> / <code>@Configuration</code>ì´ <code>@ComponentScan</code> ì–´ë…¸í…Œì´ì…˜ ì²˜ë¦¬ ë‹¨ê³„ì—ì„œ ë¨¼ì € ì²˜ë¦¬ë˜ê³ (<code>@Configuration</code> ì—­ì‹œ <code>@Component</code> ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ì´ ë‹¬ë ¤ ìˆì–´ì„œ <code>@ComponentScan</code>ì— ê±¸ë¦°ë‹¤), ê·¸ ë‹¤ìŒ <code>@Import</code> ë‹¨ê³„ì—ì„œ <code>AutoConfigurationImportSelector</code>ì— ì˜í•´ auto-configurationì´ ì²˜ë¦¬ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤. ì´ ë•ë¶„ì— ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìê°€ ì •ì˜í•œ beanì´ application contextì— ëª¨ë‘ ë“±ë¡ëœ ì´í›„ì— auto-configurationì´ ì²˜ë¦¬ë˜ëŠ” ê²ƒì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.</p>
<p>í•˜ì§€ë§Œ ë§Œì•½ auto-configurationì´ <code>@ComponentScan</code>ì— ê±¸ë¦¬ëŠ” íŒ¨í‚¤ì§€ ê²½ë¡œì— ì¡´ì¬í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ? auto-configurationì´ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œìê°€ ì •ì˜í•œ beanë“¤ê³¼ ë’¤ì„ì—¬ì„œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì— <code>@ConditionalOnBean</code>ê³¼ <code>@ConditionalOnMissingBean</code>ì´ ì˜ëª» evaluate ë  ìˆ˜ ìˆë‹¤. ì´ë¡œ ì¸í•´ ì¤‘ë³µëœ íƒ€ì…ì˜ beanì´ ì¡´ì¬í•˜ê±°ë‚˜ ë°˜ëŒ€ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì½”ë“œê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ë“± application contextê°€ ì˜ë„ì™€ëŠ” ë‹¤ë¥´ê²Œ ì˜ëª» êµ¬ì„±ë  ìˆ˜ ìˆë‹¤.</p>
<p><code>@SpringBootApplication</code>ì˜ ë©”íƒ€ ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë‹¬ë ¤ ìˆëŠ” <code>@ComponentScan</code>ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <code>AutoConfigurationExcludeFilter</code>ê°€ ì ìš©ë˜ì–´ ìˆë‹¤. ì´ë¡œ ì¸í•´ auto-configurationì´ <code>@ComponentScan</code>ì— ê±¸ë¦¬ëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ì „ëµ */</span></span><br><span class="line"><span class="meta">@ComponentScan(excludeFilters = &#123; @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),</span></span><br><span class="line"><span class="meta">    @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication &#123;</span><br><span class="line">    <span class="comment">/* ìƒëµ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>í•˜ì§€ë§Œ ë§Œì•½ ë³„ë„ì˜ <code>@ComponentScan</code>ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, íŠ¹íˆë‚˜ custom auto-configurationì´ <code>@ComponentScan</code>ì— ê±¸ë¦¬ì§€ ì•Šê²Œ í•´ì•¼ í•œë‹¤. ì´ëŠ” <a href="https://docs.spring.io/spring-boot/docs/3.0.0/reference/htmlsingle/#features.developing-auto-configuration.locating-auto-configuration-candidates">Spring Boot Referenceì—ë„ ì£¼ì˜ì‚¬í•­ìœ¼ë¡œ ëª…ì‹œë˜ì–´ ìˆë‹¤.</a></p>
<blockquote>
<p>Auto-configurations must be loaded <em>only</em> by being named in the imports file. Make sure that they are defined in a specific package space and that they are never the target of component scanning. Furthermore, auto-configuration classes should not enable component scanning to find additional components. Specific <code>@Import</code>s should be used instead.</p>
</blockquote>
<p>ê°œì¸ì ì¸ ì˜ê²¬ìœ¼ë¡œ, <code>@ComponentScan</code>ì— <code>AutoConfigurationExcludeFilter</code>ê°€ defaultë¡œ ì ìš©ë˜ì–´ ìˆì–´ì•¼ í•˜ëŠ” ê²Œ ì•„ë‹Œê°€ ì‹¶ë‹¤.<br><br /></p>
<h3 id="EnableAutoConfigurationì„-auto-configurationì—-ë‹¬ë©´-ì•ˆ-ëœë‹¤"><a href="#EnableAutoConfigurationì„-auto-configurationì—-ë‹¬ë©´-ì•ˆ-ëœë‹¤" class="headerlink" title="@EnableAutoConfigurationì„ auto-configurationì— ë‹¬ë©´ ì•ˆ ëœë‹¤"></a><code>@EnableAutoConfiguration</code>ì„ auto-configurationì— ë‹¬ë©´ ì•ˆ ëœë‹¤</h3><p>Spring Boot Referenceë¥¼ ë³´ë©´, <a href="https://docs.spring.io/spring-boot/docs/3.0.0/reference/htmlsingle/#using.auto-configuration.disabling-specific">íŠ¹ì • auto-configurationì„ disableí•˜ê¸° ìœ„í•´ <code>@EnableAutoConfiguration</code>ì˜ <code>exclude</code> / <code>excludeName</code> attributeë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤</a>ê³  í•œë‹¤. ì´ë•Œ <code>@EnableAutoConfiguration(exclude = [...])</code>ë¥¼ auto-configurationì— ë‹¬ë©´ cyclic dependencyê°€ ë°œìƒí•œë‹¤.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAutoConfiguration(exclude = [DataSourceAutoConfiguration::class.java])</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDataSourceAutoConfiguration</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ìœ„ì™€ ê°™ì´ ì •ì˜í•œ ê²½ìš°, ì•„ë˜ì™€ ê°™ì´ cyclic dependencyê°€ ë°œìƒí•œë‹¤.</p>
<ol>
<li><code>@SpringBootApplication</code>ì— ë‹¬ë ¤ ìˆëŠ” <code>@EnableAutoConfiguration</code>ì— ì˜í•´ <code>AutoConfigurationImportSelector</code>ê°€ ì‹¤í–‰ë¨.</li>
<li><code>AutoConfigurationImportSelector</code>ì— ì˜í•´ <code>MyDataSourceAutoConfiguration</code>ê°€ ì²˜ë¦¬ë¨.</li>
<li><p><code>MyDataSourceAutoConfiguration</code>ì— ë‹¬ë ¤ ìˆëŠ” <code>@EnableAutoConfiguration</code>ì— ì˜í•´ <code>AutoConfigurationImportSelector</code>ê°€ ì‹¤í–‰ë¨.</p>
<p> â†’ 2ë²ˆ ê³¼ì •ìœ¼ë¡œ ë˜ëŒì•„ê°.</p>
</li>
</ol>
<p>ë”°ë¼ì„œ, í•œ auto-configurationì´ ë‹¤ë¥¸ auto-configurationì„ disable ì‹œí‚¤ê³  ì‹¶ì€ ê²½ìš°, <code>@ImportAutoConfiguration</code>ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ì. <code>@ImportAutoConfiguration</code>ì€ <code>AutoConfigurationImportSelector</code>ë¥¼ ì‹¤í–‰ì‹œí‚¤ì§€ ì•Šì•„ì„œ cyclic dependencyê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.</p>
<h3 id="Spring-Boot-2-7-ì´ìƒ-ë²„ì „ì—ì„œ-í•˜ìœ„-í˜¸í™˜ì´-ê¹¨ì§€ëŠ”-ë¬¸ì œ"><a href="#Spring-Boot-2-7-ì´ìƒ-ë²„ì „ì—ì„œ-í•˜ìœ„-í˜¸í™˜ì´-ê¹¨ì§€ëŠ”-ë¬¸ì œ" class="headerlink" title="Spring Boot 2.7 ì´ìƒ ë²„ì „ì—ì„œ í•˜ìœ„ í˜¸í™˜ì´ ê¹¨ì§€ëŠ” ë¬¸ì œ"></a>Spring Boot 2.7 ì´ìƒ ë²„ì „ì—ì„œ í•˜ìœ„ í˜¸í™˜ì´ ê¹¨ì§€ëŠ” ë¬¸ì œ</h3><p>ë§ˆì§€ë§‰ì€ íŠ¹ì • ë²„ì „ì—ì„œë§Œ ë°œìƒí•˜ëŠ” ë¬¸ì œì´ë‹¤. ë§ì€ ê¸°ìˆ ë“¤ì´ Spring Boot integrationì„ ì œê³µí•˜ê¸° ìœ„í•´ auto-configurationì„ ì‚¬ìš©í•œë‹¤. ì´ë•Œ, ì´ integrationì´ ì§€ì›í•˜ëŠ” ë²„ì „ì´ 2.7 ì´ìƒì¸ì§€ ë¯¸ë§Œì¸ì§€ë¥¼ ì˜ ì‚´í´ë´ì•¼ í•œë‹¤. 2.7 ì´ì „ê³¼ ì´í›„ë¥¼ ê¸°ì ìœ¼ë¡œ auto-configuration ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì´ ë‹¬ë¼ì¡Œê¸° ë•Œë¬¸ì´ë‹¤.</p>
<ul>
<li>~ 2.6 - <code>META-INF/spring.factories</code></li>
<li>2.7~ - <code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code></li>
</ul>
<p>ë”°ë¼ì„œ, ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì œê³µí•˜ëŠ” auto-configurationì´ ì˜ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤ ì‹¶ë‹¤ë©´ ìì‹ ì´ ì‚¬ìš©í•˜ëŠ” Spring Boot ë²„ì „ê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì§€ì›í•˜ëŠ” Spring Boot ë²„ì „ì´ ë§ëŠ”ì§€ë¥¼ ì˜ í™•ì¸í•´ ë³´ì.<br><br></p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://docs.spring.io/spring-boot/docs/3.0.0/reference/htmlsingle">https://docs.spring.io/spring-boot/docs/3.0.0/reference/htmlsingle</a></li>
</ul>
</section>
    <!-- Tags START -->
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2022/01/21/Kotlin-coroutine-structured-concurrency/">
        <span class="nav-arrow">â† </span>
        
          Kotlin Coroutineì˜ Structured Concurrency êµ¬í˜„ ìƒì„¸
        
      </a>
    
    
      <a class="nav-right" href="/2023/01/01/goodbye-2022-1/">
        
          2022ë…„ íšŒê³  - (1)
        
        <span class="nav-arrow"> â†’</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!--COMMENT START-->
    <!---->
      <!--&lt;!&ndash; No Comment &ndash;&gt;-->
    <!---->
    <!--COMMENT END-->
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Auto-configuration%EC%9D%B4%EB%9E%80"><span class="toc-nav-text">Auto-configurationì´ë€?</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%EC%A0%95%EC%9D%98"><span class="toc-nav-text">ì •ì˜</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Configuration-vs-Auto-configuration"><span class="toc-nav-text">Configuration vs. Auto-configuration</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Auto-configuration%EC%9D%B4-%EC%A0%81%EC%9A%A9%EB%90%98%EB%8A%94-%EC%9B%90%EB%A6%AC"><span class="toc-nav-text">Auto-configurationì´ ì ìš©ë˜ëŠ” ì›ë¦¬</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%EC%82%AC%EC%9A%A9%EB%B2%95"><span class="toc-nav-text">ì‚¬ìš©ë²•</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%EC%9B%90%EB%A6%AC"><span class="toc-nav-text">ì›ë¦¬</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%EC%98%88%EC%8B%9C-DataSourceAutoConfiguration"><span class="toc-nav-text">ì˜ˆì‹œ - DataSourceAutoConfiguration</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%EC%9E%A1%EB%8B%B4"><span class="toc-nav-text">ì¡ë‹´</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Auto-configuration-%EC%82%AC%EC%9A%A9-%EC%8B%9C-%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD"><span class="toc-nav-text">Auto-configuration ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Auto-configuration%EC%9D%80-%EC%8B%A4%ED%96%89%EB%90%98%EB%8A%94-%EC%88%9C%EC%84%9C%EA%B0%80-%EC%A4%91%EC%9A%94%ED%95%98%EB%8B%A4"><span class="toc-nav-text">Auto-configurationì€ ì‹¤í–‰ë˜ëŠ” ìˆœì„œê°€ ì¤‘ìš”í•˜ë‹¤</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Auto-configuration%EC%9D%80-ComponentScan%EC%97%90-%EA%B1%B8%EB%A6%AC%EB%A9%B4-%EC%95%88-%EB%90%9C%EB%8B%A4"><span class="toc-nav-text">Auto-configurationì€ @ComponentScanì— ê±¸ë¦¬ë©´ ì•ˆ ëœë‹¤</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#EnableAutoConfiguration%EC%9D%84-auto-configuration%EC%97%90-%EB%8B%AC%EB%A9%B4-%EC%95%88-%EB%90%9C%EB%8B%A4"><span class="toc-nav-text">@EnableAutoConfigurationì„ auto-configurationì— ë‹¬ë©´ ì•ˆ ëœë‹¤</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Spring-Boot-2-7-%EC%9D%B4%EC%83%81-%EB%B2%84%EC%A0%84%EC%97%90%EC%84%9C-%ED%95%98%EC%9C%84-%ED%98%B8%ED%99%98%EC%9D%B4-%EA%B9%A8%EC%A7%80%EB%8A%94-%EB%AC%B8%EC%A0%9C"><span class="toc-nav-text">Spring Boot 2.7 ì´ìƒ ë²„ì „ì—ì„œ í•˜ìœ„ í˜¸í™˜ì´ ê¹¨ì§€ëŠ” ë¬¸ì œ</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Reference"><span class="toc-nav-text">Reference</span></a></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'https://suhwan.dev/2022/11/27/spring-boot-auto-configuration/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()
        
        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })

    // gitment
    var gitmentConfig = "";
    if (gitmentConfig !== 'undefined') {
      var gitment = new Gitment({
        id: "Spring Boot Auto-Configuration",
        owner: "",
        repo: "",
        oauth: {
          client_id: "",
          client_secret: ""
        },
        theme: {
          render(state, instance) {
            const container = document.createElement('div')
            container.lang = "en-US"
            container.className = 'gitment-container gitment-root-container'
            container.appendChild(instance.renderHeader(state, instance))
            container.appendChild(instance.renderEditor(state, instance))
            container.appendChild(instance.renderComments(state, instance))
            container.appendChild(instance.renderFooter(state, instance))
            return container;
          }
        }
      })
      gitment.render(document.getElementById('comments'))
    }
  })();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2026 | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js", function(){
      async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js", function(){
        $('figure pre').each(function(i, block) {
          var figure = $(this).parents('figure');
          if (hasLine === 'false') {
            figure.find('.gutter').hide();
          }
          var lang = figure.attr('class').split(' ')[1] || 'code';
          var codeHtml = $(this).html();
          var codeTag = document.createElement('code');
          codeTag.className = lang;
          codeTag.innerHTML = codeHtml;
          $(this).attr('class', '').empty().html(codeTag);
          figure.attr('data-lang', lang.toUpperCase());
          hljs.highlightBlock(block);
        });
      })
    })
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>

  </body>
</html>